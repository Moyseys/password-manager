{
  "$schema": "https://www.krakend.io/schema/v3.json",
  "version": 3,
  "name": "krakend",
  "extra_config": {
    "security/cors": {
      "allow_origins": ["*"],
      "allow_methods": [
        "GET",
        "POST",
        "PUT",
        "PATCH",
        "DELETE",
        "OPTIONS",
        "HEAD"
      ],
      "allow_headers": ["*"],
      "expose_headers": ["*"],
      "max_age": "24h",
      "debug": true,
      "auto_options": true
    },
    "telemetry/logging": {
      "level": "DEBUG",
      "prefix": "[KRAKEND]",
      "syslog": false,
      "stdout": true
    }
  },
  "endpoints": [
    {
      "endpoint": "/account/v1/auth",
      "method": "POST",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://account:8080"],
          "url_pattern": "/api/v1/auth",
          "method": "POST"
        }
      ],
      "output_encoding": "no-op"
    },

    {
      "endpoint": "/account/v1/auth/check",
      "method": "GET",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://account:8080"],
          "url_pattern": "/api/v1/auth/check",
          "method": "GET"
        }
      ],
      "output_encoding": "no-op"
    },

    {
      "endpoint": "/account/v1/auth/logout",
      "method": "POST",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://account:8080"],
          "url_pattern": "/api/v1/auth/logout",
          "method": "POST"
        }
      ],
      "output_encoding": "no-op"
    },

    {
      "endpoint": "/account/v1/users",
      "method": "GET",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://account:8080"],
          "url_pattern": "/api/v1/users",
          "method": "GET"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/account/v1/users",
      "method": "POST",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://account:8080"],
          "url_pattern": "/api/v1/users",
          "method": "POST"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/vaultify/v1/secrets",
      "method": "GET",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://vaultify:8080"],
          "url_pattern": "/api/v1/secrets",
          "method": "GET"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/vaultify/v1/secrets",
      "method": "POST",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://vaultify:8080"],
          "url_pattern": "/api/v1/secrets",
          "method": "POST"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/vaultify/v1/secrets/{secretId}",
      "method": "POST",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://vaultify:8080"],
          "url_pattern": "/api/v1/secrets/{secretId}",
          "method": "POST"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/vaultify/v1/secrets/{secretId}",
      "method": "PATCH",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://vaultify:8080"],
          "url_pattern": "/api/v1/secrets/{secretId}",
          "method": "PATCH"
        }
      ],
      "output_encoding": "no-op"
    },
    {
      "endpoint": "/vaultify/v1/secret-key",
      "method": "PATCH",
      "input_headers": ["*"],
      "input_query_strings": ["*"],
      "backend": [
        {
          "host": ["http://vaultify:8080"],
          "url_pattern": "/api/v1/secret-key",
          "method": "PATCH"
        }
      ],
      "output_encoding": "no-op"
    }
  ]
}
